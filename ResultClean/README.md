# 干净的页面 - 搜索结果过滤扩展程序

## 简介

"干净的页面"是一个 Edge 浏览器扩展程序，用于过滤搜索结果中的无用站点。它可以帮助用户在使用搜索引擎时，自动屏蔽指定域名的搜索结果，提高搜索效率。

## 功能特点

- 自动过滤搜索结果中的无用站点
- 支持 Google、Bing、百度等主流搜索引擎
- 支持泛域名匹配功能（如 `*.example.com/*`）
- 提供详细的统计信息
- 支持导入/导出规则
- 简洁美观的用户界面

## 安装方法

1. 下载扩展程序文件
2. 在 Edge 浏览器中，打开扩展管理页面（edge://extensions/）
3. 启用"开发者模式"
4. 点击"加载解压缩的扩展"
5. 选择 ResultClean 目录
6. 扩展程序将被安装并自动启用

## 使用说明

### 主页

主页显示扩展程序的基本信息和统计数据：

- **启用过滤**：开关按钮，用于启用或禁用过滤功能
- **过滤统计**：显示当前页面搜索结果数量、符合规则数量、已屏蔽数量和累计屏蔽数量
- **插件介绍**：介绍扩展程序的基本功能和默认支持的网站
- **规则格式规范**：说明支持的规则格式

### 自定义规则

自定义规则页面允许用户管理过滤规则：

- **导入规则**：导入 txt 格式的规则文件
- **导出规则**：将当前规则导出为 txt 文件
- **当前规则列表**：显示所有已添加的规则，可以删除不需要的规则

### 关于插件

关于插件页面显示扩展程序的详细信息：

- 插件名称
- 版本号
- 作者信息
- 功能描述
- 使用说明

## 规则格式

扩展程序支持以下几种规则格式：

1. **普通域名**：`example.com`
   - 匹配 example.com 域名

2. **泛域名**：`*.example.com`
   - 匹配 example.com 的所有子域名，如 blog.example.com、www.example.com 等

3. **域名路径**：`example.com/*`
   - 匹配 example.com 域名下的所有路径

4. **泛域名路径**：`*.example.com/*`
   - 匹配 example.com 的所有子域名和所有路径

## 导入/导出规则

### 导入规则

1. 在"自定义规则"页面点击"导入规则"按钮
2. 选择 txt 格式的规则文件
3. 文件格式要求：每行一个域名或泛域名，必须严格符合规则格式
4. 点击"导入规则"按钮完成导入

### 导出规则

1. 在"自定义规则"页面点击"导出规则"按钮
2. 规则将被导出为 txt 文件，每行一个规则
3. 导出的文件可以在其他设备上导入使用

## 默认过滤规则

扩展程序默认支持过滤以下网站：

- CSDN (csdn.net 及其子域名)
- 知乎 (zhihu.com 及其子域名)
- 豆丁网 (docin.com)
- DOC88 (doc88.com)

### 推荐过滤规则列表

以下是一份针对常见包含恶性行为的网站的过滤规则列表，您可以将这些规则导入到扩展程序中：

```
# 编程知识类网站
*.csdn.net/*
csdn.net
*.zhihu.com/*
zhihu.com
*.jianshu.com/*
jianshu.com
*.cnblogs.com/*
cnblogs.com
*.oschina.net/*
oschina.net
*.51cto.com/*
51cto.com
*.jb51.net/*
jb51.net
*.segmentfault.com/*
segmentfault.com

# 文档分享类网站
docin.com
doc88.com
book118.com
wenku.baidu.com
ishare.iask.sina.com.cn
max.book118.com
wenku.so.com
wenku365.com

# 问答类网站
*.wukong.com/*
wukong.com
*.soso.com/*
soso.com
*.sogou.com/*
sogou.com
*.so.com/*
so.com
*.ask.com/*
ask.com
*.baidu.com/question*
zhidao.baidu.com

# 博客类网站
*.cnblogs.com/*
cnblogs.com
*.csdn.net/article*
blog.csdn.net
*.oschina.net/blog*
blog.51cto.com

# 其他常见低质量网站
*.xz577.com/*
xz577.com
*.shangxueba.com/*
shangxueba.com
*.crifan.com/*
crifan.com
*.codeleading.com/*
codeleading.com
*.coder.work/*
coder.work
*.imooc.com/*
imooc.com
*.itread01.com/*
itread01.com
*.javaer101.com/*
javaer101.com
*.php.cn/*
php.cn
*.pythonheidong.com/*
pythonheidong.com
*.qtcn.org/*
qtcn.org
*.stackoom.com/*
stackoom.com
*.yisu.com/*
yisu.com
```

这些规则涵盖了编程知识类、文档分享类、问答类、博客类网站以及其他常见低质量网站。您可以根据自己的需求选择性地导入这些规则。

## 统计信息

扩展程序提供以下统计信息：

- **当前搜索结果**：当前页面上的搜索结果总数量
- **符合规则数量**：当前页面上符合过滤规则的结果数量
- **已屏蔽数量**：当前页面上已被屏蔽的结果数量
- **累计屏蔽数量**：自扩展程序安装以来累计屏蔽的结果数量

## 技术实现

- 使用 JavaScript 实现搜索结果过滤功能
- 使用 Chrome 扩展 API 实现浏览器交互
- 使用 MutationObserver 监听页面变化，确保动态加载的内容也能被过滤
- 使用 localStorage 和 chrome.storage 存储设置和统计数据

## 版本信息

- 版本：1.0.1
- 作者：江湖笔者

## 更新日志

### v1.0.1 更新内容

#### 界面优化
1. **更新了版本号**：从 1.0.0 升级到 1.0.1，并添加了“更新”标识
2. **优化了菜单样式**：
   - 增加了菜单背景色和圆角
   - 改进了菜单项的悬停效果
   - 优化了活动菜单项的视觉效果
3. **美化了开关按钮**：
   - 增加了内阴影效果
   - 优化了滑块的过渡动画
   - 增加了焦点状态的视觉反馈
4. **改进了按钮样式**：
   - 添加了悬停时的微动效果
   - 增加了阴影效果提升层次感
   - 统一了按钮的颜色和过渡效果
5. **优化了“关于”页面**：
   - 美化了仓库链接的显示效果
   - 增强了免责声明的视觉突出度
   - 添加了版本标识徽章

#### 消息通知优化
1. **实现了3秒显示限制**：
   - 消息通知现在会在显示3秒后自动淡出
   - 使用CSS过渡效果实现平滑的淡出动画
   - 添加了上移效果增强视觉体验
2. **改进了通知样式**：
   - 将通知颜色从红色改为Google蓝（#4285f4）
   - 添加了阴影效果提升层次感
   - 设置为不可交互，避免干扰页面操作

#### 性能优化
1. **减少资源占用**：
   - 使用节流函数(debounce)减少过滤操作的频率
   - 优化了DOM观察器，只在有相关变化时触发
   - 增加了定时检查的间隔时间（从3秒到5秒）
   - 添加页面可见性检查，仅在页面可见时执行过滤
2. **提高执行效率**：
   - 使用数据属性标记已处理的元素，避免重复处理
   - 优化了链接检查逻辑，提前返回减少不必要的计算
   - 改进了计数器更新逻辑，只在有变化时更新
   - 使用requestAnimationFrame确保动画流畅
3. **优化内存管理**：
   - 完善了资源清理机制，停止过滤时释放所有资源
   - 改进了计时器管理，避免内存泄漏
   - 优化了DOM元素的创建和移除逻辑

#### 代码质量改进
1. **修复了代码警告**：
   - 移除了未使用的函数参数
   - 优化了变量声明和使用
2. **增强了代码可维护性**：
   - 添加了详细的注释说明
   - 改进了函数组织结构
   - 统一了代码风格和命名规范

### v1.0.0

- 初始版本发布

## 许可证

本扩展程序仅供学习和个人使用，请勿用于商业目的。

## 反馈与建议

如有问题或建议，请联系作者。

---

希望"干净的页面"能够帮助您获得更好的搜索体验！
